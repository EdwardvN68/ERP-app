<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chief Legal Advisor Role</title>
  <link rel="stylesheet" href="css/styles.css" />
  <script src="SCORM_API_wrapper.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .container { max-width: 900px; margin: auto; padding: 20px; border-left: 6px solid #9b111e; background-color: #fff; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h1, h2 { color: #9b111e; }
    ul { margin-left: 20px; }
    .question { margin-top: 20px; padding: 10px; background: #f7f7f7; border: 1px solid #ddd; }
    .feedback { font-weight: bold; margin-top: 5px; }
    .back-button { margin-top: 30px; background-color: #9b111e; color: white; padding: 12px 24px; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; }
    .back-button:hover { background-color: #b91c1c; }
  </style>
</head>
<body>

<div class="container">
  <h1>Chief Legal Advisor</h1>

  <h2>Activation</h2>
  <p>This page is a training aid for the Emergency Management Team (EMT). The governing ERP role description for the Chief Legal Advisor is in <strong>Section 3.6.15</strong>.</p>
  <p><strong>Refer to ERP Section 3.6.15 – Chief Legal Advisor.</strong></p>

  <h2>Core Responsibilities (ERP)</h2>
  <p>The ERP defines the Chief Legal Advisor responsibilities as follows:</p>
  <ul>
    <li>Examine any statement drawn up by the EMT prior to them being issued.</li>
    <li>Provide information as applicable on legal issues pertaining to the incident.</li>
    <li>Provide legal advice on insurance policies/claims.</li>
  </ul>

  <h2>ERP References</h2>
  <p>
    The ERP remains the authoritative source during an emergency. Use the references below for the governing requirements and (where applicable) checklists:
  </p>
  <ul>
    <li>Section 2.5.1 – EMT Activation Thresholds</li>
    <li>Section 2.5.2 – EMT On-Call Roles</li>
    <li>Section 3.3.2 – Full EMT Organisation Chart</li>
    <li>Section 3.6.15 – Chief Legal Advisor</li>
  </ul>

  <h2>Knowledge Check (Interactive)</h2>
  <div class="question">
    <p><strong>Q1:</strong> Before an EMT statement is issued, what must the Chief Legal Advisor do?</p>
    <button onclick="checkAnswer(this, true)">a. Examine the statement prior to issue</button><br>
    <button onclick="checkAnswer(this, false)">b. Publish it immediately to save time</button><br>
    <button onclick="checkAnswer(this, false)">c. Send it directly to media without review</button>
    <div class="feedback"></div>
  </div>

  <div class="question">
    <p><strong>Q2:</strong> The Chief Legal Advisor provides information on which topic area?</p>
    <button onclick="checkAnswer(this, false)">a. Flight crew rostering</button><br>
    <button onclick="checkAnswer(this, true)">b. Legal issues pertaining to the incident</button><br>
    <button onclick="checkAnswer(this, false)">c. Aircraft technical troubleshooting</button>
    <div class="feedback"></div>
  </div>

  <div class="question">
    <p><strong>Q3:</strong> What is the Chief Legal Advisor’s responsibility regarding insurance?</p>
    <button onclick="checkAnswer(this, false)">a. Draft the aircraft maintenance release</button><br>
    <button onclick="checkAnswer(this, false)">b. Approve payroll changes</button><br>
    <button onclick="checkAnswer(this, true)">c. Provide legal advice on insurance policies/claims</button>
    <div class="feedback"></div>
  </div>

  <button class="back-button" id="backButton" style="display:none;" onclick="window.location.href='selectyourrole.html'">← Back to Role Menu</button>
</div>

<script>
  

  const totalQuestions = document.querySelectorAll('.question').length;
  const answered = new Array(totalQuestions).fill(false);
  const correct = new Array(totalQuestions).fill(false);

  function checkAnswer(button, isCorrect) {
    const questionElement = button.parentElement;
    const questionIndex = Array.from(document.querySelectorAll('.question')).indexOf(questionElement);
    const feedback = questionElement.querySelector('.feedback');

    if (!answered[questionIndex]) {
      answered[questionIndex] = true;
    }

    correct[questionIndex] = isCorrect;
    feedback.textContent = isCorrect ? "✅ Correct!" : "❌ Incorrect.";
    feedback.style.color = isCorrect ? "green" : "red";

    checkAllCorrect();
  }

  function markComplete() {
    if (typeof doLMSSetValue === 'function') {
      doLMSSetValue("cmi.core.lesson_status", "completed");
      doLMSCommit("");
    } else {
      console.warn("SCORM API not available – training completion not tracked.");
    }
  }

  function checkAllCorrect() {
    const allAnswered = answered.every(Boolean);
    const allCorrect = correct.every(Boolean);

    if (allAnswered && allCorrect) {
      document.getElementById("backButton").style.display = "inline-block";
      markComplete();
    }
  }
</script>

</body>
</html>