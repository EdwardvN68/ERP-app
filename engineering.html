<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Engineering Director Role</title>
  <link rel="stylesheet" href="css/styles.css" />
  <script src="SCORM_API_wrapper.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #ffffff;
    }
    .container {
      max-width: 900px;
      margin: auto;
      padding: 20px;
      border-left: 6px solid #9b111e;
      background-color: #fff;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1, h2 {
      color: #9b111e;
    }
    ul {
      margin-left: 20px;
    }
    .question {
      margin-top: 20px;
      padding: 10px;
      background: #f7f7f7;
      border: 1px solid #ddd;
    }
    .feedback {
      font-weight: bold;
      margin-top: 5px;
    }
    .back-button {
      margin-top: 30px;
      background-color: #9b111e;
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }
    .back-button:hover {
      background-color: #b91c1c;
    }

    /* --- Checklist selection block (aligned to accountable.html) --- */
    .checklist-button {
      margin-top: 16px;
      background-color: #9b111e;
      color: #fff;
      padding: 12px 18px;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      width: 100%;
      text-align: center;
      font-weight: bold;
    }
    .checklist-button:hover {
      background-color: #b91c1c;
    }
    .uncontrolled-note {
      margin-top: 10px;
      padding: 12px 14px;
      border: 1px solid #ddd;
      background: #f7f7f7;
      border-radius: 4px;
      font-style: italic;
      font-size: 14px;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>Engineering Director – Emergency Management Role</h1>

  <h2>Activation Criteria</h2>
  <p>
    This function is activated as part of EMT mobilisation. EMT on-call roles are listed in ERP Section 2.5.2, and the EMT composition table identifies the <strong>EMT Engineering</strong> role as the <strong>P145 Post Holder</strong> (alternate: <strong>Engineering Manager(s)</strong>).
  </p>

  <h2>Core Responsibilities</h2>
  <p><strong>ERP Section 3.6.5 (145 Post Holder) defines the engineering-role responsibilities as:</strong></p>
  <ul>
    <li>Advising the EMT of all engineering issues.</li>
    <li>Obtaining and securing all relevant technical data on affected aircraft.</li>
    <li>Obtaining and securing all maintenance records of affected aircraft.</li>
    <li>In consultation with the EMT, liaising with the aircraft and engineering manufacturers.</li>
    <li>In consultation with the EMT, liaising with Abu Dhabi Aviation’s insurance company regarding possible salvage requirements and provision of assistance with equipment/expertise through our insurers.</li>
    <li>Coordinating an aircraft recovery team or aircraft recovery and repair/disposal program.</li>
    <li>When applicable, arrange standby engineering staff for relief aircraft.</li>
    <li>When applicable and in consultation with the EMT provide a field representative to visit the emergency site as part of the Emergency Site Team (EST).</li>
  </ul>

  <h2>Checklist Reference</h2>
  <p>
    The engineering-role checklist in the ERP is <strong>Appendix C.9 – 145 Post Holder Checklist</strong>.
  </p>

  <button class="checklist-button" onclick="openChecklistPdf()">
    Open Appendix C.9 – 145 Post Holder Checklist (PDF)
  </button>

  <div class="uncontrolled-note">
    READ ONLY! ** Printed/Downloaded copies are considered UNCONTROLLED - Verify current issue before use **
  </div>

  <h2>ERP References</h2>
  <p>
    Use these ERP sections and appendices for the governing structure and checklist:
  </p>
  <ul>
    <li>Section 2.5.2 – EMT On-Call Roles</li>
    <li>Section 3.3.3 – EMT On-Call Roles (EMT composition table: EMT Engineering = P145 Post Holder)</li>
    <li>Section 3.6.5 – 145 Post Holder</li>
    <li>Appendix C.9 – 145 Post Holder Checklist</li>
  </ul>

  <h2>Knowledge Check</h2>

  <div class="question">
    <p><strong>Q1:</strong> Which ERP section defines the 145 Post Holder responsibilities (the EMT Engineering role)?</p>
    <button onclick="checkAnswer(this, false)">a. Section 3.6.2</button><br>
    <button onclick="checkAnswer(this, false)">b. Section 3.6.6</button><br>
    <button onclick="checkAnswer(this, true)">c. Section 3.6.5</button>
    <div class="feedback"></div>
  </div>

  <div class="question">
    <p><strong>Q2:</strong> Where are EMT on-call roles listed?</p>
    <button onclick="checkAnswer(this, false)">a. For minor maintenance issues</button><br>
    <button onclick="checkAnswer(this, false)">b. Only when GCAA calls</button><br>
    <button onclick="checkAnswer(this, true)">c. ERP Section 2.5.2</button>
    <div class="feedback"></div>
  </div>

  <div class="question">
    <p><strong>Q3:</strong> What is the correct checklist for the EMT Engineering role?</p>
    <button onclick="checkAnswer(this, false)">a. Appendix C.10</button><br>
    <button onclick="checkAnswer(this, false)">b. Appendix C.12</button><br>
    <button onclick="checkAnswer(this, true)">c. Appendix C.9</button>
    <div class="feedback"></div>
  </div>

  <div class="question">
    <p><strong>Q4:</strong> Which action is explicitly listed in ERP Section 3.6.5?</p>
    <button onclick="checkAnswer(this, false)">a. Issue technical findings to the media</button><br>
    <button onclick="checkAnswer(this, true)">b. Obtain and secure maintenance records of the affected aircraft</button><br>
    <button onclick="checkAnswer(this, false)">c. Approve regulatory deviations</button>
    <div class="feedback"></div>
  </div>

  <div class="question">
    <p><strong>Q5:</strong> According to ERP Section 3.6.5, what may be provided to the Emergency Site Team (EST) when applicable and in consultation with the EMT?</p>
    <button onclick="checkAnswer(this, false)">a. A media spokesperson</button><br>
    <button onclick="checkAnswer(this, true)">b. A field representative</button><br>
    <button onclick="checkAnswer(this, false)">c. A regulatory auditor</button>
    <div class="feedback"></div>
  </div>
  
  <p><strong>Final Note:</strong> For engineering support during an emergency, follow the responsibilities listed in ERP Section 3.6.5 and use Appendix C.9 as the checklist reference.</p>

  <button class="back-button" id="backButton" style="display:none;" onclick="window.location.href='selectyourrole.html'">← Back to Role Menu</button>
</div>

<script>
  /* IMPORTANT:
     Replace the string below with the EXACT relative path + filename of your Appendix C.9 PDF in your app.
     Example format: "Forms/your-file-name.pdf"
     Do not change anything else unless you want to.
  */
  const CHECKLIST_C9_PDF_PATH = "Forms/C.9. 145 Post Holder Checklist.pdf";

  function openChecklistPdf() {
    if (!CHECKLIST_C9_PDF_PATH || CHECKLIST_C9_PDF_PATH === "PUT-EXACT-PDF-PATH-HERE") {
      alert("Checklist PDF path not set. Update CHECKLIST_C9_PDF_PATH to the exact Appendix C.9 PDF filename/path in your app.");
      return;
    }
    window.open(CHECKLIST_C9_PDF_PATH, "_blank", "noopener");
  }

  const totalQuestions = document.querySelectorAll('.question').length;
  const answered = new Array(totalQuestions).fill(false);
  const correct = new Array(totalQuestions).fill(false);

  function checkAnswer(button, isCorrect) {
    const questionElement = button.parentElement;
    const questionIndex = Array.from(document.querySelectorAll('.question')).indexOf(questionElement);
    const feedback = questionElement.querySelector('.feedback');

    if (!answered[questionIndex]) {
      answered[questionIndex] = true;
    }

    correct[questionIndex] = isCorrect;
    feedback.textContent = isCorrect ? "✅ Correct!" : "❌ Incorrect.";
    feedback.style.color = isCorrect ? "green" : "red";

    checkAllCorrect();
  }

  function markComplete() {
    if (typeof doLMSSetValue === 'function') {
      doLMSSetValue("cmi.core.lesson_status", "completed");
      doLMSCommit("");
    } else {
      console.warn("SCORM API not available – training completion not tracked.");
    }
  }

  function checkAllCorrect() {
    const allAnswered = answered.every(Boolean);
    const allCorrect = correct.every(Boolean);

    if (allAnswered && allCorrect) {
      document.getElementById("backButton").style.display = "inline-block";
      markComplete();
    }
  }
</script>

</body>
</html>

